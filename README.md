# Fullstack Template using F# and Fable

This repository contains a minimal [SAFE](https://safe-stack.github.io/docs/intro/)-style template for creating a fullstack F# project using Fable, Feliz and Oxpecker.

To get started with a new project, click the **Use this template** button to create a new repository from this template, and check out the [docs on using templates](https://docs.github.com/en/github/creating-cloning-and-archiving-repositories/creating-a-repository-from-a-template).

## Requirements

* [Dotnet SDK](https://www.microsoft.com/net/download/core) 8.0 or higher
* [Node.js](https://nodejs.org) 18 or higher
* An F# editor like [JetBrains Rider](https://www.jetbrains.com/rider/), Visual Studio and Visual Studio Code with [Ionide](http://ionide.io/).

Or you can use the [VS Code Remote Container](https://code.visualstudio.com/docs/remote/containers?WT.mc_id=dotnet-33392-aapowell) for development, as it will set up all the required dependencies.

## Features

### Server

* [Oxpecker](https://github.com/Lanayx/Oxpecker/tree/develop) web framework.
* [Fable.Remoting](https://zaid-ajaj.github.io/Fable.Remoting/#/server-setup/saturn) for client-server communication.
* OpenApi documentation generated by Swashbuckler.
* Logging with [Serilog](https://serilog.net/).

### Client

* [Fable](https://fable.io/) for F# to JavaScript compilation.
* RPC routing with [Fable.Remoting](https://zaid-ajaj.github.io/Fable.Remoting/#/client-setup/fable).
* Styling with [Fluent UI](https://github.com/sydsutton/FS.FluentUI).
* Shared client-server types.

## Build

After cloning the repository, you should restore the local dotnet tools and the solution:

```console
dotnet tool restore
dotnet restore
```

Afterward, you can run the default build script. This will build the solution, including
both the server and the client:

```console
dotnet fsi build.fsx
```

Alternately, you can also run some other pipelines using `-p`. Examples:

- `dotnet fsi build.fsx -- -p Watch` will start the server and client in development
mode, watching for changes.

- `dotnet fsi build.fsx -- -p Format` will format all changed files using the fantomas
formatter.j

- `dotnet fsi build.fsx -- -p Sign` will generate signature files (`.fsi`) for the
project.

- `dotnet fsi build.fsx -- -p Analyze` will run the `G-Research` and `Ionide` to diagnose
source code and surface custom errors, warnings and code fixes.


## Nix

This template also includes a [Nix](https://nixos.org/) flake with [direnv](https://direnv.net/) for development.
To use it, simply run `direnv allow` in the root of the project. This will install all the dependencies and set up the environment for you.
